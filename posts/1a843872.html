<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>æƒé™é‰´å®š | æ¬¢è¿æ¥åˆ°lwmçš„å°ç«™</title><meta name="author" content="lwm"><meta name="copyright" content="lwm"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="è®¿é—®æ§åˆ¶è®¿é—®æ§åˆ¶æ¨¡å‹RBACï¼ˆRole-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰å®šä¹‰RBAC æ˜¯ä¸€ç§é€šè¿‡è§’è‰²æ¥ç®¡ç†ç”¨æˆ·æƒé™çš„æ¨¡å‹ã€‚ç”¨æˆ·è¢«åˆ†é…åˆ°ä¸åŒçš„è§’è‰²ï¼Œè€Œæ¯ä¸ªè§’è‰²åˆè¢«èµ‹äºˆç‰¹å®šçš„æƒé™ã€‚ç”¨æˆ·é€šè¿‡è§’è‰²é—´æ¥è·å¾—å¯¹èµ„æºçš„è®¿é—®æƒé™ã€‚ æ ¸å¿ƒæ¦‚å¿µ ç”¨æˆ·ï¼ˆUserï¼‰ ï¼šç³»ç»Ÿä¸­çš„ä¸ªä½“ï¼Œä¾‹å¦‚ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ç­‰ã€‚ è§’è‰²ï¼ˆRoleï¼‰ ï¼šä¸€ç»„æƒé™çš„é›†åˆï¼Œä¾‹å¦‚â€œç®¡ç†å‘˜â€ã€â€œç¼–è¾‘è€…â€ã€â€œè®¿å®¢â€ã€‚ æƒé™ï¼ˆP">
<meta property="og:type" content="article">
<meta property="og:title" content="æƒé™é‰´å®š">
<meta property="og:url" content="http://example.com/posts/1a843872.html">
<meta property="og:site_name" content="æ¬¢è¿æ¥åˆ°lwmçš„å°ç«™">
<meta property="og:description" content="è®¿é—®æ§åˆ¶è®¿é—®æ§åˆ¶æ¨¡å‹RBACï¼ˆRole-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰å®šä¹‰RBAC æ˜¯ä¸€ç§é€šè¿‡è§’è‰²æ¥ç®¡ç†ç”¨æˆ·æƒé™çš„æ¨¡å‹ã€‚ç”¨æˆ·è¢«åˆ†é…åˆ°ä¸åŒçš„è§’è‰²ï¼Œè€Œæ¯ä¸ªè§’è‰²åˆè¢«èµ‹äºˆç‰¹å®šçš„æƒé™ã€‚ç”¨æˆ·é€šè¿‡è§’è‰²é—´æ¥è·å¾—å¯¹èµ„æºçš„è®¿é—®æƒé™ã€‚ æ ¸å¿ƒæ¦‚å¿µ ç”¨æˆ·ï¼ˆUserï¼‰ ï¼šç³»ç»Ÿä¸­çš„ä¸ªä½“ï¼Œä¾‹å¦‚ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ç­‰ã€‚ è§’è‰²ï¼ˆRoleï¼‰ ï¼šä¸€ç»„æƒé™çš„é›†åˆï¼Œä¾‹å¦‚â€œç®¡ç†å‘˜â€ã€â€œç¼–è¾‘è€…â€ã€â€œè®¿å®¢â€ã€‚ æƒé™ï¼ˆP">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/icon.jpg">
<meta property="article:published_time" content="2025-04-26T14:30:21.000Z">
<meta property="article:modified_time" content="2025-05-06T12:55:50.779Z">
<meta property="article:author" content="lwm">
<meta property="article:tag" content="ä¸­é—´ä»¶">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/icon.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "æƒé™é‰´å®š",
  "url": "http://example.com/posts/1a843872.html",
  "image": "http://example.com/img/icon.jpg",
  "datePublished": "2025-04-26T14:30:21.000Z",
  "dateModified": "2025-05-06T12:55:50.779Z",
  "author": [
    {
      "@type": "Person",
      "name": "lwm",
      "url": "http://example.com/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/title.png"><link rel="canonical" href="http://example.com/posts/1a843872.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":"ture"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'æƒé™é‰´å®š',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/aside.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/tag.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.min.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/background.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/icon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-history"></i><span> æ—¶å…‰æœº</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tag"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-layer-group"></i><span> åˆ†ç±»</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">æ¬¢è¿æ¥åˆ°lwmçš„å°ç«™</span></a><a class="nav-page-title" href="/"><span class="site-name">æƒé™é‰´å®š</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-history"></i><span> æ—¶å…‰æœº</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tag"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-layer-group"></i><span> åˆ†ç±»</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">æƒé™é‰´å®š</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-04-26T14:30:21.000Z" title="å‘è¡¨äº 2025-04-26 22:30:21">2025-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-05-06T12:55:50.779Z" title="æ›´æ–°äº 2025-05-06 20:55:50">2025-05-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="è®¿é—®æ§åˆ¶"><a href="#è®¿é—®æ§åˆ¶" class="headerlink" title="è®¿é—®æ§åˆ¶"></a>è®¿é—®æ§åˆ¶</h1><h2 id="è®¿é—®æ§åˆ¶æ¨¡å‹"><a href="#è®¿é—®æ§åˆ¶æ¨¡å‹" class="headerlink" title="è®¿é—®æ§åˆ¶æ¨¡å‹"></a>è®¿é—®æ§åˆ¶æ¨¡å‹</h2><h2 id="RBACï¼ˆRole-Based-Access-Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰"><a href="#RBACï¼ˆRole-Based-Access-Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰" class="headerlink" title="RBACï¼ˆRole-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰"></a><strong>RBACï¼ˆRole-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰</strong></h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a><strong>å®šä¹‰</strong></h3><p>RBAC æ˜¯ä¸€ç§é€šè¿‡è§’è‰²æ¥ç®¡ç†ç”¨æˆ·æƒé™çš„æ¨¡å‹ã€‚ç”¨æˆ·è¢«åˆ†é…åˆ°ä¸åŒçš„è§’è‰²ï¼Œè€Œæ¯ä¸ªè§’è‰²åˆè¢«èµ‹äºˆç‰¹å®šçš„æƒé™ã€‚ç”¨æˆ·é€šè¿‡è§’è‰²é—´æ¥è·å¾—å¯¹èµ„æºçš„è®¿é—®æƒé™ã€‚</p>
<h3 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a><strong>æ ¸å¿ƒæ¦‚å¿µ</strong></h3><ul>
<li><strong>ç”¨æˆ·ï¼ˆUserï¼‰</strong> ï¼šç³»ç»Ÿä¸­çš„ä¸ªä½“ï¼Œä¾‹å¦‚ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ç­‰ã€‚</li>
<li><strong>è§’è‰²ï¼ˆRoleï¼‰</strong> ï¼šä¸€ç»„æƒé™çš„é›†åˆï¼Œä¾‹å¦‚â€œç®¡ç†å‘˜â€ã€â€œç¼–è¾‘è€…â€ã€â€œè®¿å®¢â€ã€‚</li>
<li><strong>æƒé™ï¼ˆPermissionï¼‰</strong> ï¼šå¯¹æŸä¸ªèµ„æºçš„å…·ä½“æ“ä½œæƒé™ï¼Œä¾‹å¦‚â€œè¯»å–æ–‡ä»¶â€ã€â€œåˆ é™¤æ–‡ä»¶â€ã€‚</li>
<li><strong>èµ„æºï¼ˆResourceï¼‰</strong> ï¼šç³»ç»Ÿä¸­çš„å—ä¿æŠ¤å¯¹è±¡ï¼Œä¾‹å¦‚æ–‡ä»¶ã€æ•°æ®åº“è®°å½•ç­‰ã€‚</li>
</ul>
<h3 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a><strong>å·¥ä½œåŸç†</strong></h3><ol>
<li><strong>ç”¨æˆ·ä¸è§’è‰²å…³è”</strong> ï¼šç”¨æˆ·è¢«åˆ†é…ä¸€ä¸ªæˆ–å¤šä¸ªè§’è‰²ã€‚</li>
<li><strong>è§’è‰²ä¸æƒé™å…³è”</strong> ï¼šè§’è‰²è¢«èµ‹äºˆä¸€ç»„æƒé™ã€‚</li>
<li><strong>æƒé™ç”Ÿæ•ˆ</strong> ï¼šç”¨æˆ·é€šè¿‡å…¶è§’è‰²è·å¾—å¯¹åº”çš„æƒé™ã€‚</li>
</ol>
<h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a><strong>ä¼˜ç‚¹</strong></h3><ul>
<li><strong>ç®€å•æ˜“ç”¨</strong> ï¼šæƒé™ç®¡ç†ç›´è§‚ï¼Œæ˜“äºç†è§£å’Œå®ç°ã€‚</li>
<li><strong>çµæ´»æ€§é€‚ä¸­</strong> ï¼šé€‚åˆä¸­å°è§„æ¨¡ç³»ç»Ÿï¼Œå°¤å…¶æ˜¯æƒé™éœ€æ±‚ç›¸å¯¹å›ºå®šçš„åœºæ™¯ã€‚</li>
<li><strong>é›†ä¸­ç®¡ç†</strong> ï¼šé€šè¿‡è§’è‰²é›†ä¸­ç®¡ç†æƒé™ï¼Œæ–¹ä¾¿è°ƒæ•´ã€‚</li>
</ul>
<h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a><strong>ç¼ºç‚¹</strong></h3><ul>
<li><strong>çµæ´»æ€§ä¸è¶³</strong> ï¼šå¦‚æœéœ€è¦ä¸ºæŸäº›ç”¨æˆ·å•ç‹¬è®¾ç½®ç‰¹æ®Šæƒé™ï¼Œå¯èƒ½éœ€è¦åˆ›å»ºæ–°çš„è§’è‰²ï¼Œå¯¼è‡´è§’è‰²æ•°é‡è†¨èƒ€ã€‚</li>
<li><strong>éš¾ä»¥è¡¨è¾¾å¤æ‚é€»è¾‘</strong> ï¼šæ— æ³•å¤„ç†åŠ¨æ€æ¡ä»¶ï¼ˆå¦‚æ—¶é—´ã€åœ°ç†ä½ç½®ç­‰ï¼‰çš„æƒé™æ§åˆ¶ã€‚</li>
</ul>
<h2 id="ABACï¼ˆAttribute-Based-Access-Controlï¼ŒåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰"><a href="#ABACï¼ˆAttribute-Based-Access-Controlï¼ŒåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰" class="headerlink" title="ABACï¼ˆAttribute-Based Access Controlï¼ŒåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰"></a><strong>ABACï¼ˆAttribute-Based Access Controlï¼ŒåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰</strong></h2><h3 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a><strong>å®šä¹‰</strong></h3><p>ABAC æ˜¯ä¸€ç§æ›´çµæ´»çš„è®¿é—®æ§åˆ¶æ¨¡å‹ï¼Œå®ƒæ ¹æ®ç”¨æˆ·çš„å±æ€§ã€èµ„æºçš„å±æ€§ã€ç¯å¢ƒçš„å±æ€§ä»¥åŠæ“ä½œçš„å±æ€§æ¥å†³å®šæ˜¯å¦å…è®¸è®¿é—®ã€‚</p>
<h3 id="æ ¸å¿ƒæ¦‚å¿µ-1"><a href="#æ ¸å¿ƒæ¦‚å¿µ-1" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a><strong>æ ¸å¿ƒæ¦‚å¿µ</strong></h3><ul>
<li><strong>ä¸»ä½“ï¼ˆSubjectï¼‰</strong> ï¼šå‘èµ·è¯·æ±‚çš„ç”¨æˆ·æˆ–å®ä½“ï¼Œé€šå¸¸åŒ…å«ç”¨æˆ·å±æ€§ï¼ˆå¦‚ç”¨æˆ·IDã€éƒ¨é—¨ã€èŒä½ç­‰ï¼‰ã€‚</li>
<li><strong>èµ„æºï¼ˆResourceï¼‰</strong> ï¼šè¢«è®¿é—®çš„å¯¹è±¡ï¼Œé€šå¸¸åŒ…å«èµ„æºå±æ€§ï¼ˆå¦‚æ–‡ä»¶ç±»å‹ã€æ–‡ä»¶æ‰€æœ‰è€…ç­‰ï¼‰ã€‚</li>
<li><strong>æ“ä½œï¼ˆActionï¼‰</strong> ï¼šå¯¹èµ„æºçš„æ“ä½œï¼Œä¾‹å¦‚è¯»å–ã€å†™å…¥ã€åˆ é™¤ç­‰ã€‚</li>
<li><strong>ç¯å¢ƒï¼ˆEnvironmentï¼‰</strong> ï¼šä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾‹å¦‚æ—¶é—´ã€åœ°ç‚¹ã€è®¾å¤‡ç­‰ã€‚</li>
<li><strong>ç­–ç•¥ï¼ˆPolicyï¼‰</strong> ï¼šä¸€ç»„è§„åˆ™ï¼Œç”¨äºå†³å®šæ˜¯å¦å…è®¸è®¿é—®ã€‚</li>
</ul>
<h3 id="å·¥ä½œåŸç†-1"><a href="#å·¥ä½œåŸç†-1" class="headerlink" title="å·¥ä½œåŸç†"></a><strong>å·¥ä½œåŸç†</strong></h3><p>ABAC é€šè¿‡ç­–ç•¥å¼•æ“è¯„ä¼°ä»¥ä¸‹å› ç´ ï¼š</p>
<ol>
<li><strong>ä¸»ä½“å±æ€§</strong> ï¼šè°åœ¨å‘èµ·è¯·æ±‚ï¼Ÿä¾‹å¦‚ç”¨æˆ· IDã€éƒ¨é—¨ã€èŒä½ã€‚</li>
<li><strong>èµ„æºå±æ€§</strong> ï¼šè¯·æ±‚çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä¾‹å¦‚èµ„æºç±»å‹ã€èµ„æºæ‰€æœ‰è€…ã€‚</li>
<li><strong>æ“ä½œå±æ€§</strong> ï¼šè¯·æ±‚çš„æ“ä½œæ˜¯ä»€ä¹ˆï¼Ÿä¾‹å¦‚è¯»å–ã€å†™å…¥ã€‚</li>
<li><strong>ç¯å¢ƒå±æ€§</strong> ï¼šè¯·æ±‚å‘ç”Ÿçš„ä¸Šä¸‹æ–‡æ˜¯ä»€ä¹ˆï¼Ÿä¾‹å¦‚æ—¶é—´ã€IP åœ°å€ã€‚</li>
</ol>
<p>ç­–ç•¥å¼•æ“ä¼šæ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™ï¼ˆç­–ç•¥ï¼‰åˆ¤æ–­æ˜¯å¦å…è®¸è®¿é—®ã€‚</p>
<h3 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹"></a><strong>ä¼˜ç‚¹</strong></h3><ul>
<li><strong>é«˜åº¦çµæ´»</strong> ï¼šå¯ä»¥æ ¹æ®å¤šç§å±æ€§åŠ¨æ€è°ƒæ•´æƒé™ï¼Œé€‚åˆå¤æ‚çš„ä¸šåŠ¡åœºæ™¯ã€‚</li>
<li><strong>ç»†ç²’åº¦æ§åˆ¶</strong> ï¼šå¯ä»¥é’ˆå¯¹å…·ä½“ç”¨æˆ·ã€èµ„æºã€æ“ä½œå’Œç¯å¢ƒè¿›è¡Œç²¾ç¡®æ§åˆ¶ã€‚</li>
<li><strong>å¯æ‰©å±•æ€§å¼º</strong> ï¼šæ”¯æŒåŠ¨æ€æ¡ä»¶å’Œå¤æ‚è§„åˆ™ã€‚</li>
</ul>
<h3 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a><strong>ç¼ºç‚¹</strong></h3><ul>
<li><strong>å®ç°å¤æ‚</strong> ï¼šç›¸æ¯” RBACï¼ŒABAC çš„å®ç°å’Œç»´æŠ¤æˆæœ¬æ›´é«˜ã€‚</li>
<li><strong>æ€§èƒ½å¼€é”€</strong> ï¼šç”±äºéœ€è¦å®æ—¶è®¡ç®—ç­–ç•¥ï¼Œå¯èƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„æ€§èƒ½è´Ÿæ‹…ã€‚</li>
<li><strong>å­¦ä¹ æ›²çº¿é™¡å³­</strong> ï¼šå¯¹äºå¼€å‘è€…å’Œç®¡ç†å‘˜æ¥è¯´ï¼Œç†è§£å’Œé…ç½®ç­–ç•¥éœ€è¦æ›´å¤šæ—¶é—´ã€‚</li>
</ul>
<h2 id="RBAC-vs-ABAC-å¯¹æ¯”"><a href="#RBAC-vs-ABAC-å¯¹æ¯”" class="headerlink" title="RBAC vs ABAC å¯¹æ¯”"></a><strong>RBAC vs ABAC å¯¹æ¯”</strong></h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>RBAC</th>
<th>ABAC</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ ¸å¿ƒæ€æƒ³</strong></td>
<td>åŸºäºè§’è‰²åˆ†é…æƒé™</td>
<td>åŸºäºå±æ€§åŠ¨æ€è®¡ç®—æƒé™</td>
</tr>
<tr>
<td><strong>çµæ´»æ€§</strong></td>
<td>ä¸­ç­‰</td>
<td>é«˜</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>æƒé™éœ€æ±‚å›ºå®šã€ç®€å•çš„ç³»ç»Ÿ</td>
<td>æƒé™éœ€æ±‚å¤æ‚ã€åŠ¨æ€å˜åŒ–çš„ç³»ç»Ÿ</td>
</tr>
<tr>
<td><strong>å®ç°å¤æ‚åº¦</strong></td>
<td>è¾ƒä½</td>
<td>è¾ƒé«˜</td>
</tr>
<tr>
<td><strong>æ€§èƒ½å¼€é”€</strong></td>
<td>è¾ƒä½</td>
<td>è¾ƒé«˜</td>
</tr>
<tr>
<td><strong>ç®¡ç†éš¾åº¦</strong></td>
<td>ç®€å•</td>
<td>å¤æ‚</td>
</tr>
</tbody></table>
<h2 id="ä¸­é—´ä»¶å®ç°"><a href="#ä¸­é—´ä»¶å®ç°" class="headerlink" title="ä¸­é—´ä»¶å®ç°"></a>ä¸­é—´ä»¶å®ç°</h2><h3 id="1-å®‰è£…-Casbin"><a href="#1-å®‰è£…-Casbin" class="headerlink" title="1. å®‰è£… Casbin"></a>1. å®‰è£… Casbin</h3><p>é¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† Goï¼Œå¹¶åœ¨ä½ çš„é¡¹ç›®ä¸­å¼•å…¥ <code>Casbin</code> åŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/casbin/casbin/v2</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="2-åŸºæœ¬æ¦‚å¿µ"><a href="#2-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2. åŸºæœ¬æ¦‚å¿µ"></a>2. åŸºæœ¬æ¦‚å¿µ</h3><p>åœ¨ä½¿ç”¨ <code>Casbin</code> ä¹‹å‰ï¼Œéœ€è¦äº†è§£ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>æ¨¡å‹ï¼ˆModelï¼‰</strong> ï¼šå®šä¹‰è®¿é—®æ§åˆ¶è§„åˆ™çš„é€»è¾‘ï¼Œé€šå¸¸ä»¥ <code>.conf</code> æ–‡ä»¶å½¢å¼å­˜åœ¨ã€‚</li>
<li><strong>ç­–ç•¥ï¼ˆPolicyï¼‰</strong> ï¼šå…·ä½“çš„æƒé™è§„åˆ™ï¼Œå¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ã€æ•°æ®åº“æˆ–å…¶ä»–å­˜å‚¨ä»‹è´¨ä¸­ã€‚</li>
<li><strong>Enforcer</strong> ï¼š<code>Casbin</code> çš„æ ¸å¿ƒå¯¹è±¡ï¼Œç”¨äºåŠ è½½æ¨¡å‹å’Œç­–ç•¥ï¼Œå¹¶æ‰§è¡Œæƒé™éªŒè¯ã€‚</li>
</ul>
<h3 id="3-ä½¿ç”¨æ­¥éª¤"><a href="#3-ä½¿ç”¨æ­¥éª¤" class="headerlink" title="3. ä½¿ç”¨æ­¥éª¤"></a>3. ä½¿ç”¨æ­¥éª¤</h3><h4 id="1-å®šä¹‰æ¨¡å‹æ–‡ä»¶"><a href="#1-å®šä¹‰æ¨¡å‹æ–‡ä»¶" class="headerlink" title="(1) å®šä¹‰æ¨¡å‹æ–‡ä»¶"></a>(1) å®šä¹‰æ¨¡å‹æ–‡ä»¶</h4><p>æ¨¡å‹æ–‡ä»¶æè¿°äº†è®¿é—®æ§åˆ¶çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„ RBAC æ¨¡å‹æ–‡ä»¶ <code>model.conf</code>ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[request_definition]</span></span><br><span class="line"><span class="attr">r</span> = sub, obj, act</span><br><span class="line"></span><br><span class="line"><span class="section">[policy_definition]</span></span><br><span class="line"><span class="attr">p</span> = sub, obj, act</span><br><span class="line"></span><br><span class="line"><span class="section">[role_definition]</span></span><br><span class="line"><span class="attr">g</span> = _, _</span><br><span class="line"></span><br><span class="line"><span class="section">[policy_effect]</span></span><br><span class="line"><span class="attr">e</span> = some(where (p.eft == allow))</span><br><span class="line"></span><br><span class="line"><span class="section">[matchers]</span></span><br><span class="line"><span class="attr">m</span> = g(r.sub, p.sub) &amp;&amp; r.obj == p.obj &amp;&amp; r.act == p.act</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<ul>
<li><code>r</code> è¡¨ç¤ºè¯·æ±‚çš„å®šä¹‰ï¼ŒåŒ…å«ä¸»ä½“ï¼ˆsubï¼‰ã€èµ„æºï¼ˆobjï¼‰å’ŒåŠ¨ä½œï¼ˆactï¼‰ã€‚</li>
<li><code>p</code> è¡¨ç¤ºç­–ç•¥çš„å®šä¹‰ã€‚</li>
<li><code>g</code> è¡¨ç¤ºè§’è‰²ç»§æ‰¿å…³ç³»ã€‚</li>
<li><code>e</code> è¡¨ç¤ºç­–ç•¥ç”Ÿæ•ˆçš„é€»è¾‘ã€‚</li>
<li><code>m</code> æ˜¯åŒ¹é…å™¨ï¼Œç”¨äºåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆç­–ç•¥ã€‚</li>
</ul>
<h4 id="2-å®šä¹‰ç­–ç•¥æ–‡ä»¶"><a href="#2-å®šä¹‰ç­–ç•¥æ–‡ä»¶" class="headerlink" title="(2) å®šä¹‰ç­–ç•¥æ–‡ä»¶"></a>(2) å®šä¹‰ç­–ç•¥æ–‡ä»¶</h4><p>ç­–ç•¥æ–‡ä»¶å®šä¹‰äº†å…·ä½“çš„æƒé™è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªç­–ç•¥æ–‡ä»¶ <code>policy.csv</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p, admin, data1, read</span><br><span class="line">p, admin, data1, write</span><br><span class="line">p, user, data2, read</span><br><span class="line">g, alice, admin</span><br><span class="line">g, bob, user</span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼š</p>
<ul>
<li><code>p</code> è¡¨ç¤ºç­–ç•¥è§„åˆ™ï¼Œä¾‹å¦‚ <code>admin</code> å¯ä»¥å¯¹ <code>data1</code> è¿›è¡Œ <code>read</code> å’Œ <code>write</code>ã€‚</li>
<li><code>g</code> è¡¨ç¤ºè§’è‰²åˆ†é…ï¼Œä¾‹å¦‚ <code>alice</code> å±äº <code>admin</code> è§’è‰²ã€‚</li>
</ul>
<h4 id="3-åŠ è½½æ¨¡å‹å’Œç­–ç•¥"><a href="#3-åŠ è½½æ¨¡å‹å’Œç­–ç•¥" class="headerlink" title="(3) åŠ è½½æ¨¡å‹å’Œç­–ç•¥"></a>(3) åŠ è½½æ¨¡å‹å’Œç­–ç•¥</h4><p>ä½¿ç”¨ <code>Casbin</code> çš„ <code>Enforcer</code> å¯¹è±¡åŠ è½½æ¨¡å‹å’Œç­–ç•¥æ–‡ä»¶ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/casbin/casbin/v2&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// åŠ è½½æ¨¡å‹å’Œç­–ç•¥æ–‡ä»¶</span></span><br><span class="line">    e, err := casbin.NewEnforcer(<span class="string">&quot;model.conf&quot;</span>, <span class="string">&quot;policy.csv&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;åŠ è½½æ¨¡å‹æˆ–ç­–ç•¥å¤±è´¥:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•æƒé™</span></span><br><span class="line">    sub := <span class="string">&quot;alice&quot;</span> <span class="comment">// ä¸»ä½“ï¼ˆç”¨æˆ·ï¼‰</span></span><br><span class="line">    obj := <span class="string">&quot;data1&quot;</span> <span class="comment">// èµ„æº</span></span><br><span class="line">    act := <span class="string">&quot;read&quot;</span>  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line"></span><br><span class="line">    allowed, err := e.Enforce(sub, obj, act)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;æƒé™éªŒè¯å¤±è´¥:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> allowed &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s å…è®¸å¯¹ %s æ‰§è¡Œ %s\n&quot;</span>, sub, obj, act)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s ä¸å…è®¸å¯¹ %s æ‰§è¡Œ %s\n&quot;</span>, sub, obj, act)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-åŠ¨æ€æ·»åŠ ç­–ç•¥"><a href="#4-åŠ¨æ€æ·»åŠ ç­–ç•¥" class="headerlink" title="4. åŠ¨æ€æ·»åŠ ç­–ç•¥"></a>4. åŠ¨æ€æ·»åŠ ç­–ç•¥</h3><p>å¦‚æœéœ€è¦åŠ¨æ€æ·»åŠ æˆ–ä¿®æ”¹ç­–ç•¥ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ ç­–ç•¥</span></span><br><span class="line">ok, err := e.AddPolicy(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;data3&quot;</span>, <span class="string">&quot;write&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;æ·»åŠ ç­–ç•¥å¤±è´¥:&quot;</span>, err)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> ok &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;ç­–ç•¥æ·»åŠ æˆåŠŸ&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ç­–ç•¥</span></span><br><span class="line">ok, err = e.RemovePolicy(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;data3&quot;</span>, <span class="string">&quot;write&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;åˆ é™¤ç­–ç•¥å¤±è´¥:&quot;</span>, err)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> ok &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;ç­–ç•¥åˆ é™¤æˆåŠŸ&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç­–ç•¥"><a href="#5-ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç­–ç•¥" class="headerlink" title="5. ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç­–ç•¥"></a>5. ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç­–ç•¥</h3><p>å¦‚æœç­–ç•¥æ•°æ®é‡è¾ƒå¤§ï¼Œå¯ä»¥å°†ç­–ç•¥å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œä¾‹å¦‚ MySQLã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ MySQL çš„ç¤ºä¾‹ï¼š</p>
<h4 id="1-åˆå§‹åŒ–æ•°æ®åº“é€‚é…å™¨"><a href="#1-åˆå§‹åŒ–æ•°æ®åº“é€‚é…å™¨" class="headerlink" title="(1) åˆå§‹åŒ–æ•°æ®åº“é€‚é…å™¨"></a>(1) åˆå§‹åŒ–æ•°æ®åº“é€‚é…å™¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/casbin/xorm-adapter/v2</span><br></pre></td></tr></table></figure>



<h4 id="2-é…ç½®æ•°æ®åº“è¿æ¥"><a href="#2-é…ç½®æ•°æ®åº“è¿æ¥" class="headerlink" title="(2) é…ç½®æ•°æ®åº“è¿æ¥"></a>(2) é…ç½®æ•°æ®åº“è¿æ¥</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;github.com/casbin/casbin/v2&quot;</span></span><br><span class="line">    xormadapter <span class="string">&quot;github.com/casbin/xorm-adapter/v2&quot;</span></span><br><span class="line">    _ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–æ•°æ®åº“é€‚é…å™¨</span></span><br><span class="line">    a, err := xormadapter.NewAdapter(<span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;username:password@tcp(127.0.0.1:3306)/casbin?charset=utf8&quot;</span>, <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;åˆå§‹åŒ–æ•°æ®åº“é€‚é…å™¨å¤±è´¥:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ è½½æ¨¡å‹å¹¶ä½¿ç”¨æ•°æ®åº“é€‚é…å™¨</span></span><br><span class="line">    e, err := casbin.NewEnforcer(<span class="string">&quot;model.conf&quot;</span>, a)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;åŠ è½½æ¨¡å‹æˆ–ç­–ç•¥å¤±è´¥:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒæ­¥ç­–ç•¥åˆ°æ•°æ®åº“</span></span><br><span class="line">    err = e.LoadPolicy()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;åŠ è½½ç­–ç•¥å¤±è´¥:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•æƒé™</span></span><br><span class="line">    sub := <span class="string">&quot;alice&quot;</span></span><br><span class="line">    obj := <span class="string">&quot;data1&quot;</span></span><br><span class="line">    act := <span class="string">&quot;read&quot;</span></span><br><span class="line"></span><br><span class="line">    allowed, err := e.Enforce(sub, obj, act)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;æƒé™éªŒè¯å¤±è´¥:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> allowed &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s å…è®¸å¯¹ %s æ‰§è¡Œ %s\n&quot;</span>, sub, obj, act)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s ä¸å…è®¸å¯¹ %s æ‰§è¡Œ %s\n&quot;</span>, sub, obj, act)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h3><p><code>Casbin</code> æä¾›äº†ä¸€ç§çµæ´»ä¸”é«˜æ•ˆçš„æƒé™ç®¡ç†æ–¹å¼ï¼Œé€‚ç”¨äºå„ç§å¤æ‚çš„è®¿é—®æ§åˆ¶åœºæ™¯ã€‚å®ƒçš„æ ¸å¿ƒåœ¨äºæ¨¡å‹å’Œç­–ç•¥çš„åˆ†ç¦»ï¼Œä½¿å¾—ä½ å¯ä»¥è½»æ¾åœ°æ ¹æ®éœ€æ±‚è°ƒæ•´æƒé™è§„åˆ™ã€‚</p>
<h3 id="åœ¨-web-ä¸­é—´ä»¶ä¸­ä½¿ç”¨"><a href="#åœ¨-web-ä¸­é—´ä»¶ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨ web ä¸­é—´ä»¶ä¸­ä½¿ç”¨"></a>åœ¨ web ä¸­é—´ä»¶ä¸­ä½¿ç”¨</h3><ul>
<li><p>å®šä¹‰è§„åˆ™ é€‚é…é€šè¯†ç¬¦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[request_definition]</span><br><span class="line">r = sub(ä¸»ä½“ è§’è‰²ç»„åå¦‚admin|user), obj(èµ„æºå¯¹è±¡ å¯¹åº”æŸä¸ªæ¥å£ /admin/get), act(åŠ¨ä½œ å¦‚get|post|delete)</span><br><span class="line"></span><br><span class="line">[policy_definition]</span><br><span class="line">p = sub, obj, act</span><br><span class="line"></span><br><span class="line">[role_definition]</span><br><span class="line">g = _, _</span><br><span class="line"></span><br><span class="line">[policy_effect] </span><br><span class="line">e = some(where (p.eft == allow)) //è¡¨ç¤ºåªè¦æœ‰ä¸€ä¸ªç­–ç•¥é¡¹åŒ¹é…å¹¶è¿”å› allowï¼Œå°±å…è®¸è¯¥è¯·æ±‚é€šè¿‡ã€‚</span><br><span class="line"></span><br><span class="line">[matchers]</span><br><span class="line">m = g(r.sub, p.sub) &amp;&amp; keyMatch2(r.obj, p.obj) &amp;&amp; regexMatch(r.act, p.act) //keyMatch2(r.obj, p.obj)åŒ¹é…èµ„æºè·¯å¾„ï¼Œæ”¯æŒé€šé…ç¬¦ * å’Œå‚æ•°å ä½ç¬¦ã€‚ regexMatch(r.act, p.act)ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åŠ¨ä½œï¼ˆHTTP æ–¹æ³•ç­‰ï¼‰</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="å„ä¸ªéƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š"><a href="#å„ä¸ªéƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š" class="headerlink" title="å„ä¸ªéƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š"></a>å„ä¸ªéƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š</h4><ul>
<li><strong><code>g(r.sub, p.sub)</code></strong> ï¼š<ul>
<li>åˆ¤æ–­è¯·æ±‚ä¸­çš„ç”¨æˆ· <code>r.sub</code> æ˜¯å¦å±äºç­–ç•¥ä¸­çš„è§’è‰² <code>p.sub</code>ã€‚</li>
<li>ä½¿ç”¨äº†è§’è‰²ç»§æ‰¿æœºåˆ¶ï¼Œæ”¯æŒæƒé™ç»§æ‰¿ã€‚</li>
<li>ä¾‹å¦‚ï¼šå¦‚æœ <code>r.sub = &quot;alice&quot;</code>ï¼Œ<code>p.sub = &quot;user&quot;</code>ï¼Œè€Œ <code>g(alice, user)</code> æˆç«‹ï¼Œåˆ™åŒ¹é…ã€‚</li>
</ul>
</li>
<li><strong><code>keyMatch2(r.obj, p.obj)</code></strong> ï¼š<ul>
<li>åŒ¹é…èµ„æºè·¯å¾„ï¼Œæ”¯æŒé€šé…ç¬¦ <code>*</code> å’Œå‚æ•°å ä½ç¬¦ã€‚</li>
<li>ç¤ºä¾‹ï¼š<ul>
<li><code>r.obj = &quot;/api/user/123&quot;</code>ï¼Œ<code>p.obj = &quot;/api/user/*&quot;</code> â†’ åŒ¹é…ã€‚</li>
<li><code>r.obj = &quot;/api/user/123/edit&quot;</code>ï¼Œ<code>p.obj = &quot;/api/user/*/edit&quot;</code> â†’ åŒ¹é…ã€‚</li>
<li><code>keyMatch2(&quot;/api/user/john&quot;, &quot;/api/user/:name&quot;)</code> â†’ ä¹ŸåŒ¹é…ï¼Œ<code>:name</code> æ˜¯å‚æ•°ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong><code>regexMatch(r.act, p.act)</code></strong> ï¼š<ul>
<li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åŠ¨ä½œï¼ˆHTTP æ–¹æ³•ç­‰ï¼‰ã€‚</li>
<li>ç¤ºä¾‹ï¼š<ul>
<li><code>r.act = &quot;GET&quot;</code>ï¼Œ<code>p.act = &quot;GET|POST&quot;</code> â†’ åŒ¹é…ã€‚</li>
<li><code>r.act = &quot;PUT&quot;</code>ï¼Œ<code>p.act = &quot;(GET|POST)&quot;</code> â†’ ä¸åŒ¹é…ã€‚</li>
</ul>
</li>
<li>æ³¨æ„ï¼šCasbin ä¸­çš„ <code>regexMatch(a, b)</code> å®é™…ä¸Šä¼šå°† <code>b</code> è§†ä¸ºæ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><p>ä»£ç å®ç°</p>
<p>æ ¸å¿ƒå¦‚æœä½¿ç”¨ æ•°æ®åº“é€‚é…å™¨ä¼šåœ¨åŠ è½½ç­–ç•¥æ—¶è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨</p>
<table>
<thead>
<tr>
<th>id</th>
<th>ptype</th>
<th>v0</th>
<th>v1</th>
<th>v2</th>
<th>v3</th>
<th>v4</th>
<th>v5</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>p</td>
<td>admin</td>
<td>&#x2F;api&#x2F;user&#x2F;*</td>
<td>GET|POST</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>g</td>
<td>alice</td>
<td>admin</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>å­—æ®µå«ä¹‰ï¼š</p>
<table>
<thead>
<tr>
<th><code>id</code></th>
<th><code>uint</code></th>
<th>ä¸»é”®</th>
</tr>
</thead>
<tbody><tr>
<td><code>ptype</code></td>
<td><code>string</code></td>
<td>ç­–ç•¥ç±»å‹ï¼Œå¯¹åº”<code>.conf</code>æ–‡ä»¶ä¸­çš„å®šä¹‰ï¼Œå¦‚<code>p</code>,<code>g</code></td>
</tr>
<tr>
<td><code>v0</code>~&#96;v5&#96;</td>
<td><code>string</code></td>
<td>ç­–ç•¥å‚æ•°åˆ—ï¼Œæœ€å¤šæ”¯æŒ6ä¸ªå­—æ®µ</td>
</tr>
</tbody></table>
<p>é«˜çº§é…ç½®ï¼š</p>
<h4 id="ğŸ“Œ-æ³¨æ„äº‹é¡¹"><a href="#ğŸ“Œ-æ³¨æ„äº‹é¡¹" class="headerlink" title="ğŸ“Œ æ³¨æ„äº‹é¡¹"></a>ğŸ“Œ æ³¨æ„äº‹é¡¹</h4><h5 id="âœ…-è‡ªåŠ¨å»ºè¡¨è¡Œä¸º"><a href="#âœ…-è‡ªåŠ¨å»ºè¡¨è¡Œä¸º" class="headerlink" title="âœ… è‡ªåŠ¨å»ºè¡¨è¡Œä¸º"></a>âœ… è‡ªåŠ¨å»ºè¡¨è¡Œä¸º</h5><ul>
<li><p>å¦‚æœä½ ä¸æƒ³è®©é€‚é…å™¨è‡ªåŠ¨å»ºè¡¨ï¼Œå¯ä»¥è®¾ç½®ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adapter, _ := gormadapter.NewFilteredAdapterByDB(db, <span class="literal">false</span>) <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸º false ä¸è‡ªåŠ¨å»ºè¡¨</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="ğŸ›¡ï¸-è¡¨åå¯é…ç½®"><a href="#ğŸ›¡ï¸-è¡¨åå¯é…ç½®" class="headerlink" title="ğŸ›¡ï¸ è¡¨åå¯é…ç½®"></a>ğŸ›¡ï¸ è¡¨åå¯é…ç½®</h5><p>ä½ å¯ä»¥è‡ªå®šä¹‰è¡¨åï¼Œæ¯”å¦‚æ”¹ä¸º <code>casbin_rules</code> æˆ–è€…å…¶ä»–åç§°ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adapter.SetTable(<span class="string">&quot;your_custom_table_name&quot;</span>)</span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> enforcer *casbin.Enforcer</span><br><span class="line"><span class="keyword">var</span> enforcerOnce sync.Once <span class="comment">// ç¡®ä¿åˆå§‹åŒ–é€»è¾‘åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetEnforcer</span><span class="params">()</span></span> *casbin.Enforcer &#123;</span><br><span class="line">	<span class="keyword">if</span> enforcer == <span class="literal">nil</span> &#123;</span><br><span class="line">		Init()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> enforcer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	enforcerOnce.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		log := logger.GetLogger()</span><br><span class="line">		db := database.GetDB()</span><br><span class="line">		<span class="comment">// åˆ›å»ºé€‚é…å™¨ï¼ˆä» GORM åˆå§‹åŒ–ï¼‰</span></span><br><span class="line">		adapter, _ := gormadapter.NewAdapterByDB(db)</span><br><span class="line">		<span class="comment">// åˆ›å»º Enforcer</span></span><br><span class="line">		<span class="keyword">var</span> e, err = casbin.NewEnforcer(<span class="string">&quot;casbin/model.conf&quot;</span>, adapter)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">			log.Fatalf(err.Error())</span><br><span class="line">		&#125;</span><br><span class="line">		enforcer = e</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ä» DB åŠ è½½ç­–ç•¥</span></span><br><span class="line">		_ = enforcer.LoadPolicy()</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> middleware</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/lwm-galactic/ai-agent/pkg/enforcer&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CasbinMiddleware</span><span class="params">()</span></span> gin.HandlerFunc &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// å‡è®¾ç”¨æˆ·ä¿¡æ¯é€šè¿‡ JWT æˆ–å…¶ä»–æ–¹å¼å­˜å‚¨åœ¨ä¸Šä¸‹æ–‡ä¸­</span></span><br><span class="line">		userType := c.GetString(<span class="string">&quot;user_type&quot;</span>) <span class="comment">// ç”¨æˆ·å”¯ä¸€çš„id</span></span><br><span class="line"></span><br><span class="line">		obj := c.Request.URL.Path <span class="comment">// è¯·æ±‚çš„èµ„æºè·¯å¾„</span></span><br><span class="line">		act := c.Request.Method   <span class="comment">// è¯·æ±‚çš„æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰</span></span><br><span class="line">		Enforcer := enforcer.GetEnforcer()</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ä½¿ç”¨ Casbin è¿›è¡Œæƒé™éªŒè¯</span></span><br><span class="line">		ok, err := Enforcer.Enforce(userType, obj, act)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusInternalServerError, gin.H&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;æƒé™éªŒè¯å¤±è´¥&quot;</span>&#125;)</span><br><span class="line">			c.Abort()</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> !ok &#123;</span><br><span class="line">			c.JSON(http.StatusForbidden, gin.H&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;æ— æƒè®¿é—®&quot;</span>&#125;)</span><br><span class="line">			c.Abort()</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// å¦‚æœæƒé™éªŒè¯é€šè¿‡ï¼Œç»§ç»­å¤„ç†è¯·æ±‚</span></span><br><span class="line">		c.Next()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://example.com">lwm</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://example.com/posts/1a843872.html">http://example.com/posts/1a843872.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="http://example.com" target="_blank">æ¬¢è¿æ¥åˆ°lwmçš„å°ç«™</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/">ä¸­é—´ä»¶</a></div><div class="post-share"><div class="social-share" data-image="/img/icon.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/posts/de252c3b.html" title="eino å­¦ä¹ "><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">eino å­¦ä¹ </div></div><div class="info-2"><div class="info-item-1">EnioçŸ¥è¯†åº“ç»„ä»¶ï¼ˆä½¿ç”¨ redisearch æ•°æ®åº“ï¼‰document.Loader ï¼ˆæ–‡æœ¬è½½å…¥æ¥å£ï¼‰æ¥å£å®šä¹‰ 123type Loader interface &#123;    Load(ctx context.Context, src Source, opts ...LoaderOption) ([]*schema.Document, error)&#125;  åŠŸèƒ½ï¼šè´Ÿè´£æ–‡æœ¬çš„è½½å…¥ï¼ŒåŠ è½½æˆDocument æ ¼å¼ 123456789101112131415type Document struct &#123;    // ID æ˜¯æ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚    // é€šå¸¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ UUID æˆ–å…¶ä»–å”¯ä¸€å€¼ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æ–‡æ¡£ã€‚    ID string `json:&quot;id&quot;`    // Content æ˜¯æ–‡æ¡£çš„å†…å®¹ã€‚    // é€šå¸¸æ˜¯çº¯æ–‡æœ¬ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ Markdownã€HTML ç­‰æ ¼å¼çš„æ–‡æœ¬ã€‚    // è¯¥å­—æ®µå­˜å‚¨éœ€è¦å¤„ç†æˆ–å±•ç¤ºçš„æ–‡æœ¬å†…å®¹ã€‚    Content string `json:&quot;content&quot;`    //...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/icon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">lwm</div><div class="author-info-description">äººç”Ÿæœ‰å¤šå°‘ä¸ªåå¹´</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lwm-galactic"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">1.</span> <span class="toc-text">è®¿é—®æ§åˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text">è®¿é—®æ§åˆ¶æ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RBAC%EF%BC%88Role-Based-Access-Control%EF%BC%8C%E5%9F%BA%E4%BA%8E%E8%A7%92%E8%89%B2%E7%9A%84%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">RBACï¼ˆRole-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.2.</span> <span class="toc-text">æ ¸å¿ƒæ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.3.</span> <span class="toc-text">å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">1.2.4.</span> <span class="toc-text">ä¼˜ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">1.2.5.</span> <span class="toc-text">ç¼ºç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ABAC%EF%BC%88Attribute-Based-Access-Control%EF%BC%8C%E5%9F%BA%E4%BA%8E%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">ABACï¼ˆAttribute-Based Access Controlï¼ŒåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5-1"><span class="toc-number">1.3.2.</span> <span class="toc-text">æ ¸å¿ƒæ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-1"><span class="toc-number">1.3.3.</span> <span class="toc-text">å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%82%B9-1"><span class="toc-number">1.3.4.</span> <span class="toc-text">ä¼˜ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9-1"><span class="toc-number">1.3.5.</span> <span class="toc-text">ç¼ºç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RBAC-vs-ABAC-%E5%AF%B9%E6%AF%94"><span class="toc-number">1.4.</span> <span class="toc-text">RBAC vs ABAC å¯¹æ¯”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.5.</span> <span class="toc-text">ä¸­é—´ä»¶å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-Casbin"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. å®‰è£… Casbin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. åŸºæœ¬æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. ä½¿ç”¨æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9E%8B%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">(1) å®šä¹‰æ¨¡å‹æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AE%9A%E4%B9%89%E7%AD%96%E7%95%A5%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">(2) å®šä¹‰ç­–ç•¥æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9E%8B%E5%92%8C%E7%AD%96%E7%95%A5"><span class="toc-number">1.5.3.3.</span> <span class="toc-text">(3) åŠ è½½æ¨¡å‹å’Œç­–ç•¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E7%AD%96%E7%95%A5"><span class="toc-number">1.5.4.</span> <span class="toc-text">4. åŠ¨æ€æ·»åŠ ç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E7%AD%96%E7%95%A5"><span class="toc-number">1.5.5.</span> <span class="toc-text">5. ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%E9%80%82%E9%85%8D%E5%99%A8"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">(1) åˆå§‹åŒ–æ•°æ®åº“é€‚é…å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.5.5.2.</span> <span class="toc-text">(2) é…ç½®æ•°æ®åº“è¿æ¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%80%BB%E7%BB%93"><span class="toc-number">1.5.6.</span> <span class="toc-text">6. æ€»ç»“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8-web-%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.7.</span> <span class="toc-text">åœ¨ web ä¸­é—´ä»¶ä¸­ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E9%83%A8%E5%88%86%E5%90%AB%E4%B9%89%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="toc-number">1.5.7.1.</span> <span class="toc-text">å„ä¸ªéƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%93%8C-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.5.7.2.</span> <span class="toc-text">ğŸ“Œ æ³¨æ„äº‹é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%9C%85-%E8%87%AA%E5%8A%A8%E5%BB%BA%E8%A1%A8%E8%A1%8C%E4%B8%BA"><span class="toc-number">1.5.7.2.1.</span> <span class="toc-text">âœ… è‡ªåŠ¨å»ºè¡¨è¡Œä¸º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%F0%9F%9B%A1%EF%B8%8F-%E8%A1%A8%E5%90%8D%E5%8F%AF%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.7.2.2.</span> <span class="toc-text">ğŸ›¡ï¸ è¡¨åå¯é…ç½®</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/1a843872.html" title="æƒé™é‰´å®š">æƒé™é‰´å®š</a><time datetime="2025-04-26T14:30:21.000Z" title="å‘è¡¨äº 2025-04-26 22:30:21">2025-04-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/de252c3b.html" title="eino å­¦ä¹ ">eino å­¦ä¹ </a><time datetime="2025-04-06T13:53:08.000Z" title="å‘è¡¨äº 2025-04-06 21:53:08">2025-04-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/46cde7d0.html" title="redisearchå­¦ä¹ ">redisearchå­¦ä¹ </a><time datetime="2025-04-06T10:46:42.000Z" title="å‘è¡¨äº 2025-04-06 18:46:42">2025-04-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/54cbcfb5.html" title="Ai-å·¥ä½œæµå­¦ä¹ ">Ai-å·¥ä½œæµå­¦ä¹ </a><time datetime="2025-03-11T13:52:20.000Z" title="å‘è¡¨äº 2025-03-11 21:52:20">2025-03-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/f4e76ba9.html" title="gorm æ•°æ®åº“é«˜çº§ç”¨æ³•">gorm æ•°æ®åº“é«˜çº§ç”¨æ³•</a><time datetime="2025-03-03T12:32:35.000Z" title="å‘è¡¨äº 2025-03-03 20:32:35">2025-03-03</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By lwm</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.3</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script src="/js/pet_icon.js"></script><script src="/js/title.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('flink-list-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('article-sort-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__slideInRight');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__flipInY');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script><script async="async">var arr = document.getElementsByClassName('site-card');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__animated');
    arr[i].setAttribute('data-wow-duration', '3s');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="åšå®¢æ¡†æ¶ä¸ºHexo_v5.4.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.2.2" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" data-title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ" title=""><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a></p>';
    console.log('å·²æŒ‚è½½butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><!-- hexo injector body_end end --></body></html>